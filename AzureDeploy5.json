{
  "$schema": "http://schemas.microsoft.org/azure/deploymentTemplate?api-version=2015-01-01-preview#",
  "contentVersion": "1.0",
  "parameters": {
    "accountName": {
      "type": "string",
      "metadata": {
        "description": "The name of the Azure Automation account to deploy to."
      }
    },
    "subscriptionId": {
      "type": "string",
      "metadata": {
        "description": "Azure subscriptionID"
      }
    },
    "OMS_PrimaryKey": {
      "type": "string",
      "metadata": {
        "description": "OMS Workspace Primary Key "
      }
    },
    "OMS_WorkspaceID": {
      "type": "string",
      "metadata": {
        "description": "OMS WorkspaceID "
      }
    },
    "OMS_WorkspaceName": {
      "type": "string",
      "metadata": {
        "description": "OMS Workspace Name"
      }
    },
    "OMS_ResourceGroup": {
      "type": "string",
      "metadata": {
        "description": "OMS Resource Group Name"
      }
    },
    "AWS_Region": {
      "type": "string",
      "metadata": {
        "description": "AWS Region"
      }
    },
    "AWS_Accesskey": {
      "type": "string",
      "metadata": {
        "description": "AWS AccessKey"
      }
    },
    "AWS_Profilename": {
      "type": "string",
      "metadata": {
        "description": "AWS Profilename"
      }
    },
    "AWS_Secretkey": {
      "type": "string",
      "metadata": {
        "description": "AWS secretkey"
      }
    },
    "aws_dim_cloudtrail": {
      "type": "string",
      "defaultValue": " ",
      "metadata": {
        "description": "AWS cloudtrail dimensions"
      }
    },
    "aws_dim_rds": {
      "type": "string",
      "defaultValue": " ",
      "metadata": {
        "description": "AWS rds dimensions"
      }
    },
    "aws_dimensionperf": {
      "type": "string",
      "defaultValue": " ",
      "metadata": {
        "description": "AWS performance dimensions"
      }
    },
    "aws_metricname": {
      "type": "string",
      "defaultValue": "'CPUUtilization,NetworkOut,NetworkIn,DiskWriteOps,DiskReadBytes'",
      "metadata": {
        "description": "AWS performance metrics"
      }
    },
    "aws_metricscloudtrail": {
      "type": "string",
      "defaultValue": "'IncomingBytes,IncomingLogEvents'",
      "metadata": {
        "description": "AWS cloudtrail metrics"
      }
    },
    "aws_metricsrds": {
      "type": "string",
      "defaultValue": "'DiskQueueDepth,DatabaseConnections'",
      "metadata": {
        "description": "AWS rds metrics"
      }
    },
    "CLOUDTRAIL": {
      "type": "string",
      "defaultValue": "'True'",
      "allowedValues": ["'True'","'False'"],
      "metadata": {
        "description": "Boolean for cloudtrail data"
      }
    },
    "EC2": {
      "type": "string",
      "defaultValue": "'True'",
      "allowedValues": [ "'True'", "'False'" ],
      "metadata": {
        "description": "Boolean for ec2 data"
      }
    },
    "RDS": {
      "type": "string",
      "defaultValue": "'True'",
      "allowedValues": [ "'True'", "'False'" ],
      "metadata": {
        "description": "Boolean for rds data"
      }
    },
    "scheduleStartTime": {
      "type": "string",
      "metadata": {
        "Description": "Start time for shedule."
      }
    },
    "scheduleTimeZone": {
      "type": "string",
      "metadata": {
        "Description": "Time zone for schedule."
      }
    },
    "credentialName": {
      "type": "string",
      "defaultValue": "DefaultAzureCredential",
      "metadata": {
        "description": "DefaultAzureCredential is the name of the Automation credential used in this runbook. This credential allows you to authenticate to Azure. "
      }
    }
  },
  "variables": {
    "runbookName": "aws_control",
    "scriptUri": "https://raw.githubusercontent.com/riteshgrover/AWSsolutionPublic/master/aws_control.ps1",
    "runbookDescription": "Control Module Runbook",
    "sku": "Free",
    "runbookName1": "aws_export",
    "scriptUri1": "https://raw.githubusercontent.com/riteshgrover/AWSsolutionPublic/master/aws_export.ps1",
    "runbookDescription1": "AWS Export Runbook",
    "runbookName2": "omsinput",
    "scriptUri2": "https://raw.githubusercontent.com/riteshgrover/AWSsolutionPublic/master/omsinput.ps1",
    "runbookDescription2": "OMS EC2 Import Runbook",
    "runbookName3": "omsinput_cloudtrail",
    "scriptUri3": "https://raw.githubusercontent.com/riteshgrover/AWSsolutionPublic/master/omsinput_cloudtrail.ps1",
    "runbookDescription3": "Cloudtrail Import Runbook",
    "runbookName4": "omsinput_rds",
    "scriptUri4": "https://raw.githubusercontent.com/riteshgrover/AWSsolutionPublic/master/omsinput_rds.ps1",
    "runbookDescription4": "RDS Import Runbook",
    "var_name": "aws_access",
    "var_Description": "AWS Access Key",
    "var_Encrypted": 0,
    "var_Type": "string",
    "var_Value": "[parameters('AWS_Accesskey')]",
    "var_name1": "aws_dim_cloudtrail",
    "var_Description1": "Dim Cloudtrail Variable",
    "var_Encrypted1": 0,
    "var_Type1": "string",
    "var_Value1": "[parameters('aws_dim_cloudtrail')]",
    "var_name2": "aws_dim_rds",
    "var_Description2": "RDS Variable",
    "var_Encrypted2": 0,
    "var_Type2": "string",
    "var_Value2": "[parameters('aws_dim_rds')]",
    "var_name3": "aws_dimensionperf",
    "var_Description3": "AWS Perf Variable",
    "var_Encrypted3": 0,
    "var_Type3": "string",
    "var_Value3": "[parameters('aws_dimensionperf')]",
    "var_name4": "aws_metricname",
    "var_Description4": "AWS Metric EC2",
    "var_Encrypted4": 0,
    "var_Type4": "string",
    "var_Value4": "[parameters('aws_metricname')]",
    "var_name5": "aws_metricscloudtrail",
    "var_Description5": "AWS Metrics Cloudtrail",
    "var_Encrypted5": 0,
    "var_Type5": "string",
    "var_Value5": "[parameters('aws_metricscloudtrail')]",
    "var_name6": "aws_metricsrds",
    "var_Description6": "AWS Metrics RDS",
    "var_Encrypted6": 0,
    "var_Type6": "string",
    "var_Value6": "[parameters('aws_metricsrds')]",
    "var_name7": "aws_profilename",
    "var_Description7": "AWS Profile Variable",
    "var_Encrypted7": 0,
    "var_Type7": "string",
    "var_Value7": "[parameters('AWS_Profilename')]",
    "var_name8": "aws_region",
    "var_Description8": "AWS Region Variable",
    "var_Encrypted8": 0,
    "var_Type8": "string",
    "var_Value8": "[parameters('AWS_Region')]",
    "var_name9": "aws_secretkey",
    "var_Description9": "AWS Secret Key",
    "var_Encrypted9": 0,
    "var_Type9": "string",
    "var_Value9": "[parameters('AWS_Secretkey')]",
    "var_name10": "CLOUDTRAIL",
    "var_Description10": "Cloudtrail Flag",
    "var_Encrypted10": 0,
    "var_Type10": "string",
    "var_Value10": "[parameters('CLOUDTRAIL')]",
    "var_name11": "EC2",
    "var_Description11": "EC2 Flag",
    "var_Encrypted11": 0,
    "var_Type11": "string",
    "var_Value11": "[parameters('EC2')]",
    "var_name12": "OMS_primarykey",
    "var_Description12": "OMS PrimaryKey Name",
    "var_Encrypted12": 0,
    "var_Type12": "string",
    "var_Value12": "[parameters('OMS_PrimaryKey')]",
    "var_name13": "OMS_ResourceGroup",
    "var_Description13": "OMS Resource Group",
    "var_Encrypted13": 0,
    "var_Type13": "string",
    "var_Value13": "[parameters('OMS_ResourceGroup')]",
    "var_name14": "OMS_WorkspaceName",
    "var_Description14": "OMS Workspace Name",
    "var_Encrypted14": 0,
    "var_Type14": "string",
    "var_Value14": "'[parameters('OMS_WorkspaceName')]'",
    "var_name15": "RDS",
    "var_Description15": "RDS Flag",
    "var_Encrypted15": 0,
    "var_Type15": "string",
    "var_Value15": "[parameters('RDS')]",
    "var_name16": "OMS_workspaceid",
    "var_Description16": "OMS Workspace ID",
    "var_Encrypted16": 0,
    "var_Type16": "string",
    "var_Value16": "[parameters('OMS_WorkspaceID')]",
    "scheduleName": "Schedule Start Time",
    "scheduleDescription": "Schedule",
    "IsEnabled": "true",
    "Interval": "1",
    "Frequency": "hour",
    "StartTime": "[parameters('scheduleStartTime')]",
    "TimeZone": "[parameters('scheduleTimeZone')]",

    "SolutionVersion": "1.2",
    "SolutionPublisher": "Contoso",
    "SolutionName": "aws-oms",
    "LogAnalyticsApiVersion": "2015-11-01-preview",
    "ViewAuthor": "user@contoso.com",
    "ViewDescription": "This is a sample view.",
    "ViewName": "Contoso View"


  },
  "resources": [
    {
      "name": "[parameters('accountName')]",
      "type": "Microsoft.Automation/automationAccounts",
      "apiVersion": "2017-05-15-preview",
      "location": "[resourceGroup().location]",
      "dependsOn": [],
      "tags": {},
      "properties": {
        "sku": {
          "name": "[variables('sku')]"
        }
      },
      "resources": [
        {
          "name": "[variables('runbookName')]",
          "type": "runbooks",
          "apiVersion": "2017-05-15-preview",
          "location": "[resourceGroup().location]",
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('accountName'))]"
          ],
          "tags": {},
          "properties": {
            "runbookType": "Script",
            "logProgress": "false",
            "logVerbose": "false",
            "description": "[variables('runbookDescription')]",
            "publishContentLink": {
              "uri": "[variables('scriptUri')]",
              "version": "1.0.0.0"
            }
          }
        },
        {
          "name": "[variables('runbookName1')]",
          "type": "runbooks",
          "apiVersion": "2017-05-15-preview",
          "location": "[resourceGroup().location]",
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('accountName'))]"
          ],
          "tags": {},
          "properties": {
            "runbookType": "Script",
            "logProgress": "false",
            "logVerbose": "false",
            "description": "[variables('runbookDescription1')]",
            "publishContentLink": {
              "uri": "[variables('scriptUri1')]",
              "version": "1.0.0.0"
            }
          }
        },
        {
          "name": "[variables('runbookName2')]",
          "type": "runbooks",
          "apiVersion": "2017-05-15-preview",
          "location": "[resourceGroup().location]",
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('accountName'))]"
          ],
          "tags": {},
          "properties": {
            "runbookType": "Script",
            "logProgress": "false",
            "logVerbose": "false",
            "description": "[variables('runbookDescription2')]",
            "publishContentLink": {
              "uri": "[variables('scriptUri2')]",
              "version": "1.0.0.0"
            }
          }
        },
        {
          "name": "[variables('runbookName3')]",
          "type": "runbooks",
          "apiVersion": "2017-05-15-preview",
          "location": "[resourceGroup().location]",
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('accountName'))]"
          ],
          "tags": {},
          "properties": {
            "runbookType": "Script",
            "logProgress": "false",
            "logVerbose": "false",
            "description": "[variables('runbookDescription3')]",
            "publishContentLink": {
              "uri": "[variables('scriptUri3')]",
              "version": "1.0.0.0"
            }
          }
        },
        {
          "name": "[variables('runbookName4')]",
          "type": "runbooks",
          "apiVersion": "2017-05-15-preview",
          "location": "[resourceGroup().location]",
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('accountName'))]"
          ],
          "tags": {},
          "properties": {
            "runbookType": "Script",
            "logProgress": "false",
            "logVerbose": "false",
            "description": "[variables('runbookDescription4')]",
            "publishContentLink": {
              "uri": "[variables('scriptUri4')]",
              "version": "1.0.0.0"
            }
          }
        },
        {
          "name": "[variables('var_name')]",
          "type": "variables",
          "apiVersion": "2017-05-15-preview",
          "tags": {},
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('accountName'))]"
          ],
          "properties": {
            "description": "[variables('var_Description')]",
            "isEncrypted": "[variables('var_Encrypted')]",
            "type": "[variables('var_Type')]",
            "value": "[variables('var_Value')]"
          }
        },
        {
          "name": "[variables('var_name1')]",
          "type": "variables",
          "apiVersion": "2017-05-15-preview",
          "tags": {},
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('accountName'))]"
          ],
          "properties": {
            "description": "[variables('var_Description1')]",
            "isEncrypted": "[variables('var_Encrypted1')]",
            "type": "[variables('var_Type1')]",
            "value": "[variables('var_Value1')]"
          }
        },
        {
          "name": "[variables('var_name2')]",
          "type": "variables",
          "apiVersion": "2017-05-15-preview",
          "tags": {},
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('accountName'))]"
          ],
          "properties": {
            "description": "[variables('var_Description2')]",
            "isEncrypted": "[variables('var_Encrypted2')]",
            "type": "[variables('var_Type2')]",
            "value": "[variables('var_Value2')]"
          }
        },
        {
          "name": "[variables('var_name3')]",
          "type": "variables",
          "apiVersion": "2017-05-15-preview",
          "tags": {},
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('accountName'))]"
          ],
          "properties": {
            "description": "[variables('var_Description3')]",
            "isEncrypted": "[variables('var_Encrypted3')]",
            "type": "[variables('var_Type3')]",
            "value": "[variables('var_Value3')]"
          }
        },
        {
          "name": "[variables('var_name4')]",
          "type": "variables",
          "apiVersion": "2017-05-15-preview",
          "tags": {},
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('accountName'))]"
          ],
          "properties": {
            "description": "[variables('var_Description4')]",
            "isEncrypted": "[variables('var_Encrypted4')]",
            "type": "[variables('var_Type4')]",
            "value": "[variables('var_Value4')]"
          }
        },
        {
          "name": "[variables('var_name5')]",
          "type": "variables",
          "apiVersion": "2017-05-15-preview",
          "tags": {},
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('accountName'))]"
          ],
          "properties": {
            "description": "[variables('var_Description5')]",
            "isEncrypted": "[variables('var_Encrypted5')]",
            "type": "[variables('var_Type5')]",
            "value": "[variables('var_Value5')]"
          }
        },
        {
          "name": "[variables('var_name6')]",
          "type": "variables",
          "apiVersion": "2017-05-15-preview",
          "tags": {},
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('accountName'))]"
          ],
          "properties": {
            "description": "[variables('var_Description6')]",
            "isEncrypted": "[variables('var_Encrypted6')]",
            "type": "[variables('var_Type6')]",
            "value": "[variables('var_Value6')]"
          }
        },
        {
          "name": "[variables('var_name7')]",
          "type": "variables",
          "apiVersion": "2017-05-15-preview",
          "tags": {},
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('accountName'))]"
          ],
          "properties": {
            "description": "[variables('var_Description7')]",
            "isEncrypted": "[variables('var_Encrypted7')]",
            "type": "[variables('var_Type7')]",
            "value": "[variables('var_Value7')]"
          }
        },
        {
          "name": "[variables('var_name8')]",
          "type": "variables",
          "apiVersion": "2017-05-15-preview",
          "tags": {},
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('accountName'))]"
          ],
          "properties": {
            "description": "[variables('var_Description8')]",
            "isEncrypted": "[variables('var_Encrypted8')]",
            "type": "[variables('var_Type8')]",
            "value": "[variables('var_Value8')]"
          }
        },
        {
          "name": "[variables('var_name9')]",
          "type": "variables",
          "apiVersion": "2017-05-15-preview",
          "tags": {},
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('accountName'))]"
          ],
          "properties": {
            "description": "[variables('var_Description9')]",
            "isEncrypted": "[variables('var_Encrypted9')]",
            "type": "[variables('var_Type9')]",
            "value": "[variables('var_Value9')]"
          }
        },
        {
          "name": "[variables('var_name10')]",
          "type": "variables",
          "apiVersion": "2017-05-15-preview",
          "tags": {},
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('accountName'))]"
          ],
          "properties": {
            "description": "[variables('var_Description10')]",
            "isEncrypted": "[variables('var_Encrypted10')]",
            "type": "[variables('var_Type10')]",
            "value": "[variables('var_Value10')]"
          }
        },
        {
          "name": "[variables('var_name11')]",
          "type": "variables",
          "apiVersion": "2017-05-15-preview",
          "tags": {},
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('accountName'))]"
          ],
          "properties": {
            "description": "[variables('var_Description11')]",
            "isEncrypted": "[variables('var_Encrypted11')]",
            "type": "[variables('var_Type11')]",
            "value": "[variables('var_Value11')]"
          }
        },
        {
          "name": "[variables('var_name12')]",
          "type": "variables",
          "apiVersion": "2017-05-15-preview",
          "tags": {},
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('accountName'))]"
          ],
          "properties": {
            "description": "[variables('var_Description12')]",
            "isEncrypted": "[variables('var_Encrypted12')]",
            "type": "[variables('var_Type12')]",
            "value": "[variables('var_Value12')]"
          }
        },
        {
          "name": "[variables('var_name13')]",
          "type": "variables",
          "apiVersion": "2017-05-15-preview",
          "tags": {},
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('accountName'))]"
          ],
          "properties": {
            "description": "[variables('var_Description13')]",
            "isEncrypted": "[variables('var_Encrypted13')]",
            "type": "[variables('var_Type13')]",
            "value": "[variables('var_Value13')]"
          }
        },
        {
          "name": "[variables('var_name15')]",
          "type": "variables",
          "apiVersion": "2017-05-15-preview",
          "tags": {},
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('accountName'))]"
          ],
          "properties": {
            "description": "[variables('var_Description15')]",
            "isEncrypted": "[variables('var_Encrypted15')]",
            "type": "[variables('var_Type15')]",
            "value": "[variables('var_Value15')]"
          }
        },
        {
          "name": "[variables('var_name16')]",
          "type": "variables",
          "apiVersion": "2017-05-15-preview",
          "tags": {},
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('accountName'))]"
          ],
          "properties": {
            "description": "[variables('var_Description16')]",
            "isEncrypted": "[variables('var_Encrypted16')]",
            "type": "[variables('var_Type16')]",
            "value": "[variables('var_Value16')]"
          }
        },
        {
          "name": "[variables('scheduleName')]",
          "type": "schedules",
          "apiVersion": "2017-05-15-preview",
          "tags": {},
          "dependsOn": [
            "[concat('Microsoft.Automation/automationAccounts/', parameters('accountName'))]"
          ],
          "properties": {
            "description": "[variables('scheduleDescription')]",
            "startTime": "[variables('startTime')]",
            "timeZone": "[variables('TimeZone')]",
            "isEnabled": "[variables('IsEnabled')]",
            "interval": "[variables('Interval')]",
            "frequency": "[variables('Frequency')]"
          }
        }
      ]
    },
    {
      "name": "[variables('SolutionName')]",
      "location": "[resourceGroup().location]",
      "tags": {},
      "type": "Microsoft.OperationsManagement/solutions",
      "apiVersion": "[variables('LogAnalyticsApiVersion')]",
      "dependsOn": [
        "[Concat('/subscriptions/', parameters('subscriptionId'),'/resourceGroups/', resourceGroup().name, '/providers/Microsoft.OperationalInsights/workspaces/', parameters('OMS_WorkspaceName'),'/views/Cloudtrail log events')]",
        "[Concat('/subscriptions/', parameters('subscriptionId'),'/resourceGroups/', resourceGroup().name, '/providers/Microsoft.OperationalInsights/workspaces/', parameters('OMS_WorkspaceName'),'/views/AWS EC2 Disk Metrics')]",
        "[Concat('/subscriptions/', parameters('subscriptionId'),'/resourceGroups/', resourceGroup().name, '/providers/Microsoft.OperationalInsights/workspaces/', parameters('OMS_WorkspaceName'),'/views/AWS Metric Overview')]",
        "[Concat('/subscriptions/', parameters('subscriptionId'),'/resourceGroups/', resourceGroup().name, '/providers/Microsoft.OperationalInsights/workspaces/', parameters('OMS_WorkspaceName'),'/views/RDS DiskQueueDepth Metric')]",
        "[Concat('/subscriptions/', parameters('subscriptionId'),'/resourceGroups/', resourceGroup().name, '/providers/Microsoft.OperationalInsights/workspaces/', parameters('OMS_WorkspaceName'),'/views/AWS EC2 CPUUtilization')]",
        "[Concat('/subscriptions/', parameters('subscriptionId'),'/resourceGroups/', resourceGroup().name, '/providers/Microsoft.OperationalInsights/workspaces/', parameters('OMS_WorkspaceName'),'/views/AWS EC2 Networkin')]"

      ],
      "properties": {
        "workspaceResourceId": "[concat(resourceGroup().id, '/providers/Microsoft.OperationalInsights/workspaces/',parameters('OMS_WorkspaceName'))]",
        "referencedResources": [
        ],
        "containedResources": [
          "[Concat('/subscriptions/', parameters('subscriptionId'),'/resourceGroups/', resourceGroup().name, '/providers/Microsoft.OperationalInsights/workspaces/', parameters('OMS_WorkspaceName'),'/views/Cloudtrail log events')]",
          "[Concat('/subscriptions/', parameters('subscriptionId'),'/resourceGroups/', resourceGroup().name, '/providers/Microsoft.OperationalInsights/workspaces/', parameters('OMS_WorkspaceName'),'/views/AWS EC2 Disk Metrics')]",
          "[Concat('/subscriptions/', parameters('subscriptionId'),'/resourceGroups/', resourceGroup().name, '/providers/Microsoft.OperationalInsights/workspaces/', parameters('OMS_WorkspaceName'),'/views/AWS Metric Overview')]",
          "[Concat('/subscriptions/', parameters('subscriptionId'),'/resourceGroups/', resourceGroup().name, '/providers/Microsoft.OperationalInsights/workspaces/', parameters('OMS_WorkspaceName'),'/views/RDS DiskQueueDepth Metric')]",
          "[Concat('/subscriptions/', parameters('subscriptionId'),'/resourceGroups/', resourceGroup().name, '/providers/Microsoft.OperationalInsights/workspaces/', parameters('OMS_WorkspaceName'),'/views/AWS EC2 CPUUtilization')]",
          "[Concat('/subscriptions/', parameters('subscriptionId'),'/resourceGroups/', resourceGroup().name, '/providers/Microsoft.OperationalInsights/workspaces/', parameters('OMS_WorkspaceName'),'/views/AWS EC2 Networkin')]"

        ]
      },
      "plan": {
        "name": "[variables('SolutionName')]",
        "Version": "[variables('SolutionVersion')]",
        "product": "ContosoSolution",
        "publisher": "[variables('SolutionPublisher')]",
        "promotionCode": ""
      }
    },
    {
      "apiVersion": "2017-04-26-preview",
      "name": "[parameters('OMS_WorkspaceName')]",
      "type": "Microsoft.OperationalInsights/workspaces",
      "location": "[resourceGroup().location]",
      "id": "[Concat('/subscriptions/', parameters('subscriptionId'),'/resourceGroups/', resourceGroup().name, '/providers/Microsoft.OperationalInsights/workspaces/',parameters('OMS_WorkspaceName'))]",
      "resources": [
        {
          "apiVersion": "2015-11-01-preview",
          "name": "Cloudwatch log events",
          "type": "views",
          "location": "[resourceGroup().location]",
          "id": "[Concat('/subscriptions/', parameters('subscriptionId'),'/resourceGroups/', resourceGroup().name, '/providers/Microsoft.OperationalInsights/workspaces/',parameters('OMS_WorkspaceName'),'/views/Cloudtrail log events')]",
          "dependson": [
            "[Concat('/subscriptions/', parameters('subscriptionId'),'/resourceGroups/', resourceGroup().name, '/providers/Microsoft.OperationalInsights/workspaces/',parameters('OMS_WorkspaceName'))]"
          ],
          "properties": {
            "Id": "Cloudwatch log events",
            "Name": "Cloudwatch log events",
            "Author": "rgrover@microsoft.com",
            "Source": "Local",
            "Version": 1,
            "Dashboard": [
              {
                "Id": "NumberTileListBuilderBlade",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "Log Events Cloudtrail",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Tile": {
                    "Query": "* Type=cloudtrail_CL (ObjectName_s=IncomingLogEvents)|measure avg(Average_d) as AVG by InstanceId_s ",
                    "Legend": "Number of Instances"
                  },
                  "List": {
                    "Query": "* Type=cloudtrail_CL (ObjectName_s=IncomingLogEvents)|measure count() by InstanceId_s ",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "Instances",
                      "Value": "Number of data points"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": false,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "60",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "90",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              },
              {
                "Id": "LineChartBuilderBlade",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "Log Events Metric over Time",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Header": {
                    "Title": "Log Events Data/10 mins",
                    "Subtitle": ""
                  },
                  "LineChart": {
                    "Query": "* Type=cloudtrail_CL (ObjectName_s=IncomingLogEvents)|measure avg(Average_d) as AVG by InstanceId_s Interval 10MINUTES",
                    "yAxis": {
                      "isLogarithmic": false,
                      "units": {
                        "baseUnitType": "",
                        "baseUnit": "",
                        "displayUnit": ""
                      },
                      "customLabel": ""
                    }
                  },
                  "List": {
                    "Query": "* Type=cloudtrail_CL (ObjectName_s=IncomingLogEvents)|measure avg(Average_d) as AVG by InstanceId_s ",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "Instances",
                      "Value": "Avg Log Events Value"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": false,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "60",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "90",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              },
              {
                "Id": "SingleQueryDonutBuilderBladeV1",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "Cloudtrail Log Events Metric",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Header": {
                    "Title": "Cloudtrail Log Events",
                    "Subtitle": ""
                  },
                  "Donut": {
                    "Query": "* Type=cloudtrail_CL (ObjectName_s=IncomingLogEvents)|measure avg(Average_d) as AVG by InstanceId_s ",
                    "CenterLegend": {
                      "Text": "Total",
                      "Operation": "Sum",
                      "ArcsToSelect": []
                    },
                    "Options": {
                      "colors": [
                        "#00188f",
                        "#0072c6",
                        "#00bcf2"
                      ],
                      "valueColorMapping": []
                    }
                  },
                  "List": {
                    "Query": "* Type=cloudtrail_CL (ObjectName_s=IncomingLogEvents)|measure avg(Average_d) as AVG by InstanceId_s ",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "Instances",
                      "Value": "Avg Log Events"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": false,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "60",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "90",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              }
            ],
            "OverviewTile": {
              "Id": "LineChartBuilderTile",
              "Type": "OverviewTile",
              "Version": 0,
              "Configuration": {
                "LineChart": {
                  "Query": "* Type=cloudtrail_CL (ObjectName_s=IncomingLogEvents)|measure avg(Average_d) by InstanceId_s Interval 10MINUTES",
                  "yAxis": {
                    "isLogarithmic": false,
                    "units": {
                      "baseUnitType": "",
                      "baseUnit": "",
                      "displayUnit": ""
                    },
                    "customLabel": ""
                  }
                },
                "Advanced": {
                  "DataFlowVerification": {
                    "Enabled": false,
                    "Query": "*",
                    "Message": ""
                  }
                }
              }
            }
          }
        },
        {
          "apiVersion": "2015-11-01-preview",
          "name": "AWS EC2 Disk Metrics",
          "type": "views",
          "location": "[resourceGroup().location]",
          "id": "[Concat('/subscriptions/', parameters('subscriptionId'),'/resourceGroups/', resourceGroup().name, '/providers/Microsoft.OperationalInsights/workspaces/',parameters('OMS_WorkspaceName'),'/views/AWS EC2 Disk Metrics')]",
          "dependson": [
            "[Concat('/subscriptions/', parameters('subscriptionId'),'/resourceGroups/', resourceGroup().name, '/providers/Microsoft.OperationalInsights/workspaces/',parameters('OMS_WorkspaceName'))]"
          ],
          "properties": {
            "Id": "AWS EC2 Disk Metrics",
            "Name": "AWS EC2 Disk Metrics",
            "Author": "rgrover@microsoft.com",
            "Source": "Local",
            "Version": 1,
            "Dashboard": [
              {
                "Id": "NumberTileListBuilderBlade",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "No of Instances",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Tile": {
                    "Query": "Type:awsperf_CL ObjectName_s=DiskReadBytes InstanceId_s=i-08b290d4ab98f79c3 | measure avg(Average_d) as AVGCPU by InstanceId_s",
                    "Legend": "Instances sending disk data"
                  },
                  "List": {
                    "Query": "* Type=awsperf_CL ObjectName_s=DiskReadBytes|measure count() by InstanceId_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "Instances",
                      "Value": "No of data points"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": false,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "60",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "90",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              },
              {
                "Id": "LineChartBuilderBlade",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "Disk Read Metrics over Time",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Header": {
                    "Title": "Disk Read Metric",
                    "Subtitle": ""
                  },
                  "LineChart": {
                    "Query": "Type:awsperf_CL ObjectName_s=DiskReadBytes InstanceId_s=i-08b290d4ab98f79c3 | measure avg(Average_d) by InstanceId_s Interval 10MINUTES",
                    "yAxis": {
                      "isLogarithmic": false,
                      "units": {
                        "baseUnitType": "",
                        "baseUnit": "",
                        "displayUnit": ""
                      },
                      "customLabel": ""
                    }
                  },
                  "List": {
                    "Query": "Type:awsperf_CL ObjectName_s=DiskReadBytes InstanceId_s=i-08b290d4ab98f79c3 | measure avg(Average_d) as AVGCPU by InstanceId_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "Instances",
                      "Value": "Avg Disk Read Metric"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": false,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "60",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "90",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              },
              {
                "Id": "SingleQueryDonutBuilderBladeV1",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "Disk Read Metric",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Header": {
                    "Title": "Disk Read Data",
                    "Subtitle": ""
                  },
                  "Donut": {
                    "Query": "Type:awsperf_CL ObjectName_s=DiskReadBytes InstanceId_s=i-08b290d4ab98f79c3 | measure avg(Average_d) as AVGCPU by InstanceId_s",
                    "CenterLegend": {
                      "Text": "Total",
                      "Operation": "Sum",
                      "ArcsToSelect": []
                    },
                    "Options": {
                      "colors": [
                        "#00188f",
                        "#0072c6",
                        "#00bcf2"
                      ],
                      "valueColorMapping": []
                    }
                  },
                  "List": {
                    "Query": "Type:awsperf_CL ObjectName_s=DiskReadBytes InstanceId_s=i-08b290d4ab98f79c3 | measure avg(Average_d) as AVGCPU by InstanceId_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "INSTANCES",
                      "Value": "AVG DISK READ METRIC"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": false,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "60",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "90",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              }
            ],
            "OverviewTile": {
              "Id": "LineChartBuilderTile",
              "Type": "OverviewTile",
              "Version": 0,
              "Configuration": {
                "LineChart": {
                  "Query": "Type:awsperf_CL ObjectName_s=DiskReadBytes InstanceId_s=i-08b290d4ab98f79c3 | measure avg(Average_d) by InstanceId_s Interval 10MINUTES",
                  "yAxis": {
                    "isLogarithmic": false,
                    "units": {
                      "baseUnitType": "",
                      "baseUnit": "",
                      "displayUnit": ""
                    },
                    "customLabel": ""
                  }
                },
                "Advanced": {
                  "DataFlowVerification": {
                    "Enabled": false,
                    "Query": "*",
                    "Message": ""
                  }
                }
              }
            }
          }
        },
        {
          "apiVersion": "2015-11-01-preview",
          "name": "AWS Metric Overview",
          "type": "views",
          "location": "[resourceGroup().location]",
          "id": "[Concat('/subscriptions/', parameters('subscriptionId'),'/resourceGroups/', resourceGroup().name, '/providers/Microsoft.OperationalInsights/workspaces/',parameters('OMS_WorkspaceName'),'/views/AWS Metric Overview')]",
          "dependson": [
            "[Concat('/subscriptions/', parameters('subscriptionId'),'/resourceGroups/', resourceGroup().name, '/providers/Microsoft.OperationalInsights/workspaces/',parameters('OMS_WorkspaceName'))]"
          ],
          "properties": {
            "Id": "AWS Metric Overview",
            "Name": "AWS Metric Overview",
            "Author": "rgrover@microsoft.com",
            "Source": "Local",
            "Version": 1,
            "Dashboard": [
              {
                "Id": "SingleQueryDonutBuilderBladeV1",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "AWS Metric List",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Header": {
                    "Title": "--",
                    "Subtitle": ""
                  },
                  "Donut": {
                    "Query": "* | measure count() by Type",
                    "CenterLegend": {
                      "Text": "Total",
                      "Operation": "Sum",
                      "ArcsToSelect": []
                    },
                    "Options": {
                      "colors": [
                        "#00188f",
                        "#0072c6",
                        "#00bcf2"
                      ],
                      "valueColorMapping": []
                    }
                  },
                  "List": {
                    "Query": "* | measure Count() by Type",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "Computer",
                      "Value": "Count"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": false,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "60",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "90",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              }
            ],
            "OverviewTile": {
              "Id": "LineChartBuilderTile",
              "Type": "OverviewTile",
              "Version": 0,
              "Configuration": {
                "LineChart": {
                  "Query": "* | measure count() by Type",
                  "yAxis": {
                    "isLogarithmic": false,
                    "units": {
                      "baseUnitType": "",
                      "baseUnit": "",
                      "displayUnit": ""
                    },
                    "customLabel": ""
                  }
                },
                "Advanced": {
                  "DataFlowVerification": {
                    "Enabled": false,
                    "Query": "*",
                    "Message": ""
                  }
                }
              }
            }
          }
        },
        {
          "apiVersion": "2015-11-01-preview",
          "name": "AWS Metric Overview",
          "type": "views",
          "location": "[resourceGroup().location]",
          "id": "[Concat('/subscriptions/', parameters('subscriptionId'),'/resourceGroups/', resourceGroup().name, '/providers/Microsoft.OperationalInsights/workspaces/',parameters('OMS_WorkspaceName'),'/views/RDS DiskQueueDepth Metric')]",
          "dependson": [
            "[Concat('/subscriptions/', parameters('subscriptionId'),'/resourceGroups/', resourceGroup().name, '/providers/Microsoft.OperationalInsights/workspaces/',parameters('OMS_WorkspaceName'))]"
          ],
          "properties": {
            "Id": "RDS DiskQueueDepth Metric",
            "Name": "RDS DiskQueueDepth Metric",
            "Author": "rgrover@microsoft.com",
            "Source": "Local",
            "Version": 1,
            "Dashboard": [
              {
                "Id": "NumberTileListBuilderBlade",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "RDS DiskQueueDepth Metric",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Tile": {
                    "Query": "* Type=rds_CL ObjectName_s=DiskQueueDepth | measure avg(Average_d) by InstanceId_s",
                    "Legend": "Instances sending data"
                  },
                  "List": {
                    "Query": "* Type=rds_CL ObjectName_s=DiskQueueDepth | measure count() by InstanceId_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "Instances",
                      "Value": "Number of data points"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": false,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "60",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "90",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              },
              {
                "Id": "LineChartBuilderBlade",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "Data type distribution",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Header": {
                    "Title": "DiskQueueDepth Metric over time",
                    "Subtitle": ""
                  },
                  "LineChart": {
                    "Query": "* Type=rds_CL ObjectName_s=DiskQueueDepth | measure avg(Average_d) by InstanceId_s Interval 10MINUTES",
                    "yAxis": {
                      "isLogarithmic": false,
                      "units": {
                        "baseUnitType": "",
                        "baseUnit": "",
                        "displayUnit": ""
                      },
                      "customLabel": ""
                    }
                  },
                  "List": {
                    "Query": "* Type=rds_CL ObjectName_s=DiskQueueDepth | measure avg(Average_d) by InstanceId_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "Instances",
                      "Value": "Average Metric Value"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": false,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "60",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "90",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              },
              {
                "Id": "SingleQueryDonutBuilderBladeV1",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "Distribution by Computer",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Header": {
                    "Title": "--",
                    "Subtitle": ""
                  },
                  "Donut": {
                    "Query": "* Type=rds_CL ObjectName_s=DiskQueueDepth | measure avg(Average_d) by InstanceId_s",
                    "CenterLegend": {
                      "Text": "Total",
                      "Operation": "Sum",
                      "ArcsToSelect": []
                    },
                    "Options": {
                      "colors": [
                        "#00188f",
                        "#0072c6",
                        "#00bcf2"
                      ],
                      "valueColorMapping": []
                    }
                  },
                  "List": {
                    "Query": "* Type=rds_CL ObjectName_s=DiskQueueDepth | measure avg(Average_d) by InstanceId_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "Instances",
                      "Value": "Avg Metric Value"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": false,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "60",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "90",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              }
            ],
            "OverviewTile": {
              "Id": "LineChartBuilderTile",
              "Type": "OverviewTile",
              "Version": 0,
              "Configuration": {
                "LineChart": {
                  "Query": "* Type=rds_CL (ObjectName_s=DiskQueueDepth) | measure avg(Average_d) by InstanceId_s Interval 10MINUTES",
                  "yAxis": {
                    "isLogarithmic": false,
                    "units": {
                      "baseUnitType": "",
                      "baseUnit": "",
                      "displayUnit": ""
                    },
                    "customLabel": ""
                  }
                },
                "Advanced": {
                  "DataFlowVerification": {
                    "Enabled": false,
                    "Query": "*",
                    "Message": ""
                  }
                }
              }
            }
          }
        },
        {
          "apiVersion": "2015-11-01-preview",
          "name": "AWS Metric Overview",
          "type": "views",
          "location": "[resourceGroup().location]",
          "id": "[Concat('/subscriptions/', parameters('subscriptionId'),'/resourceGroups/', resourceGroup().name, '/providers/Microsoft.OperationalInsights/workspaces/',parameters('OMS_WorkspaceName'),'/views/AWS EC2 CPUUtilization')]",
          "dependson": [
            "[Concat('/subscriptions/', parameters('subscriptionId'),'/resourceGroups/', resourceGroup().name, '/providers/Microsoft.OperationalInsights/workspaces/',parameters('OMS_WorkspaceName'))]"
          ],
          "properties": {
            "Id": "AWS EC2 CPUUtilization",
            "Name": "AWS EC2 CPUUtilization",
            "Author": "rgrover@microsoft.com",
            "Source": "Local",
            "Version": 1,
            "Dashboard": [
              {
                "Id": "NumberTileListBuilderBlade",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "EC2 Instances",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Tile": {
                    "Query": "* Type=awsperf_CL ObjectName_s=CPUUtilization |measure count() by InstanceId_s",
                    "Legend": "Instances sending data"
                  },
                  "List": {
                    "Query": "* Type=awsperf_CL ObjectName_s=CPUUtilization |measure count() by InstanceId_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "Instances",
                      "Value": "Number of metric points"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": false,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "60",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "90",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              },
              {
                "Id": "LineChartBuilderBlade",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "CPUUtilization Average Metric",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Header": {
                    "Title": "Avg Cpuutilization metric over time",
                    "Subtitle": ""
                  },
                  "LineChart": {
                    "Query": "Type:awsperf_CL ObjectName_s=CPUUtilization InstanceId_s=i-08b290d4ab98f79c3 | measure avg(Average_d) by InstanceId_s Interval 10MINUTES",
                    "yAxis": {
                      "isLogarithmic": false,
                      "units": {
                        "baseUnitType": "",
                        "baseUnit": "",
                        "displayUnit": ""
                      },
                      "customLabel": ""
                    }
                  },
                  "List": {
                    "Query": "Type:awsperf_CL ObjectName_s=CPUUtilization InstanceId_s=i-08b290d4ab98f79c3 | measure avg(Average_d) as AVGCPU by InstanceId_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "Metric",
                      "Value": "Avg Value"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": false,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "60",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "90",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              },
              {
                "Id": "SingleQueryDonutBuilderBladeV1",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "CPUUtilization Metric",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Header": {
                    "Title": "CPUUtilization",
                    "Subtitle": ""
                  },
                  "Donut": {
                    "Query": "Type:awsperf_CL ObjectName_s=CPUUtilization InstanceId_s=i-08b290d4ab98f79c3 | measure avg(Average_d) as AVGCPU by InstanceId_s",
                    "CenterLegend": {
                      "Text": "Total",
                      "Operation": "Sum",
                      "ArcsToSelect": []
                    },
                    "Options": {
                      "colors": [
                        "#00188f",
                        "#0072c6",
                        "#00bcf2"
                      ],
                      "valueColorMapping": []
                    }
                  },
                  "List": {
                    "Query": "Type:awsperf_CL ObjectName_s=CPUUtilization InstanceId_s=i-08b290d4ab98f79c3 | measure avg(Average_d) as AVGCPU by InstanceId_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "Instance",
                      "Value": "Avg Metric Value"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": false,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "60",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "90",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              }
            ],
            "OverviewTile": {
              "Id": "LineChartBuilderTile",
              "Type": "OverviewTile",
              "Version": 0,
              "Configuration": {
                "LineChart": {
                  "Query": "Type:awsperf_CL ObjectName_s=CPUUtilization InstanceId_s=i-08b290d4ab98f79c3 | measure avg(Average_d) as AVGCPU by InstanceId_s",
                  "yAxis": {
                    "isLogarithmic": false,
                    "units": {
                      "baseUnitType": "",
                      "baseUnit": "",
                      "displayUnit": ""
                    },
                    "customLabel": "AVGCPU"
                  }
                },
                "Advanced": {
                  "DataFlowVerification": {
                    "Enabled": false,
                    "Query": "*",
                    "Message": ""
                  }
                }
              }
            }
          }
        },
        {
          "apiVersion": "2015-11-01-preview",
          "name": "AWS Metric Overview",
          "type": "views",
          "location": "[resourceGroup().location]",
          "id": "[Concat('/subscriptions/', parameters('subscriptionId'),'/resourceGroups/', resourceGroup().name, '/providers/Microsoft.OperationalInsights/workspaces/',parameters('OMS_WorkspaceName'),'/views/AWS EC2 Networkin')]",
          "dependson": [
            "[Concat('/subscriptions/', parameters('subscriptionId'),'/resourceGroups/', resourceGroup().name, '/providers/Microsoft.OperationalInsights/workspaces/',parameters('OMS_WorkspaceName'))]"
          ],
          "properties": {
            "Id": "AWS EC2 Networkin",
            "Name": "AWS EC2 Networkin",
            "Author": "rgrover@microsoft.com",
            "Source": "Local",
            "Version": 1,
            "Dashboard": [
              {
                "Id": "NumberTileListBuilderBlade",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "EC2 NetworkIn  Metric",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Tile": {
                    "Query": "Type:awsperf_CL ObjectName_s=NetworkIn InstanceId_s=i-08b290d4ab98f79c3 | measure avg(Average_d) as AVGCPU by InstanceId_s",
                    "Legend": "Computers sending data"
                  },
                  "List": {
                    "Query": "* Type=awsperf_CL (ObjectName_s=NetworkIn) |measure count() by InstanceId_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "Instances",
                      "Value": "No of data points"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": false,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "60",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "90",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              },
              {
                "Id": "LineChartBuilderBlade",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "NetworkIn data",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Header": {
                    "Title": "NetworkIn data over time",
                    "Subtitle": ""
                  },
                  "LineChart": {
                    "Query": "Type:awsperf_CL ObjectName_s=NetworkIn InstanceId_s=i-08b290d4ab98f79c3 | measure avg(Average_d) by InstanceId_s Interval 10MINUTES",
                    "yAxis": {
                      "isLogarithmic": false,
                      "units": {
                        "baseUnitType": "",
                        "baseUnit": "",
                        "displayUnit": ""
                      },
                      "customLabel": ""
                    }
                  },
                  "List": {
                    "Query": "Type:awsperf_CL ObjectName_s=NetworkIn InstanceId_s=i-08b290d4ab98f79c3 | measure avg(Average_d) as AVGCPU by InstanceId_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "Instances",
                      "Value": "Avg value of NetworkIn data"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": false,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "60",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "90",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              },
              {
                "Id": "SingleQueryDonutBuilderBladeV1",
                "Type": "Blade",
                "Version": 0,
                "Configuration": {
                  "General": {
                    "title": "NetworkIn Metric",
                    "newGroup": false,
                    "icon": "",
                    "useIcon": false
                  },
                  "Header": {
                    "Title": "NetworkIn Metric",
                    "Subtitle": ""
                  },
                  "Donut": {
                    "Query": "Type:awsperf_CL ObjectName_s=NetworkIn InstanceId_s=i-08b290d4ab98f79c3 | measure avg(Average_d) as AVGCPU by InstanceId_s",
                    "CenterLegend": {
                      "Text": "Total",
                      "Operation": "Sum",
                      "ArcsToSelect": []
                    },
                    "Options": {
                      "colors": [
                        "#00188f",
                        "#0072c6",
                        "#00bcf2"
                      ],
                      "valueColorMapping": []
                    }
                  },
                  "List": {
                    "Query": "Type:awsperf_CL ObjectName_s=NetworkIn InstanceId_s=i-08b290d4ab98f79c3 | measure avg(Average_d) as AVGCPU by InstanceId_s",
                    "HideGraph": false,
                    "enableSparklines": false,
                    "operation": "Summary",
                    "ColumnsTitle": {
                      "Name": "Instances",
                      "Value": "NetworkIn Metric"
                    },
                    "Color": "#0072c6",
                    "thresholds": {
                      "isEnabled": false,
                      "values": [
                        {
                          "name": "Normal",
                          "threshold": "Default",
                          "color": "#009e49",
                          "isDefault": true
                        },
                        {
                          "name": "Warning",
                          "threshold": "60",
                          "color": "#fcd116",
                          "isDefault": false
                        },
                        {
                          "name": "Error",
                          "threshold": "90",
                          "color": "#ba141a",
                          "isDefault": false
                        }
                      ]
                    },
                    "NameDSVSeparator": "",
                    "NavigationQuery": "{selected item}"
                  }
                }
              }
            ],
            "OverviewTile": {
              "Id": "LineChartBuilderTile",
              "Type": "OverviewTile",
              "Version": 0,
              "Configuration": {
                "LineChart": {
                  "Query": "Type:awsperf_CL ObjectName_s=NetworkIn InstanceId_s=i-08b290d4ab98f79c3 | measure avg(Average_d) by InstanceId_s Interval 10MINUTES",
                  "yAxis": {
                    "isLogarithmic": false,
                    "units": {
                      "baseUnitType": "",
                      "baseUnit": "",
                      "displayUnit": ""
                    },
                    "customLabel": ""
                  }
                },
                "Advanced": {
                  "DataFlowVerification": {
                    "Enabled": false,
                    "Query": "*",
                    "Message": ""
                  }
                }
              }
            }
          }
        }
      ]
    }
  ],

  "outputs": {}
}
